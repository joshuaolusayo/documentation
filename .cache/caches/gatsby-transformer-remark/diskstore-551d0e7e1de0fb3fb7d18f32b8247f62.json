{"expireTime":9007200851888162000,"key":"transformer-remark-markdown-ast-e26aae6f0f920285ae5c96cc6011374f-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-external-linksgatsby-remark-header-custom-idsgatsby-remark-code-replsgatsby-remark-embed-snippetgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"This page introduces the concept of state and lifecycle in a React component. You can find a ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":94,"offset":94},"indent":[]}},{"type":"link","title":null,"url":"/docs/react-component.html","children":[{"type":"text","value":"detailed component API reference here","position":{"start":{"line":2,"column":95,"offset":95},"end":{"line":2,"column":132,"offset":132},"indent":[]}}],"position":{"start":{"line":2,"column":94,"offset":94},"end":{"line":2,"column":161,"offset":161},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":2,"column":161,"offset":161},"end":{"line":2,"column":162,"offset":162},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":162,"offset":162},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Consider the ticking clock example from ","position":{"start":{"line":4,"column":1,"offset":164},"end":{"line":4,"column":41,"offset":204},"indent":[]}},{"type":"link","title":null,"url":"/docs/rendering-elements.html#updating-the-rendered-element","children":[{"type":"text","value":"one of the previous sections","position":{"start":{"line":4,"column":42,"offset":205},"end":{"line":4,"column":70,"offset":233},"indent":[]}}],"position":{"start":{"line":4,"column":41,"offset":204},"end":{"line":4,"column":132,"offset":295},"indent":[]}},{"type":"text","value":". In ","position":{"start":{"line":4,"column":132,"offset":295},"end":{"line":4,"column":137,"offset":300},"indent":[]}},{"type":"link","title":null,"url":"/docs/rendering-elements.html#rendering-an-element-into-the-dom","children":[{"type":"text","value":"Rendering Elements","position":{"start":{"line":4,"column":138,"offset":301},"end":{"line":4,"column":156,"offset":319},"indent":[]}}],"position":{"start":{"line":4,"column":137,"offset":300},"end":{"line":4,"column":222,"offset":385},"indent":[]}},{"type":"text","value":", we have only learned one way to update the UI. We call ","position":{"start":{"line":4,"column":222,"offset":385},"end":{"line":4,"column":279,"offset":442},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">ReactDOM.render()</code>","position":{"start":{"line":4,"column":279,"offset":442},"end":{"line":4,"column":298,"offset":461},"indent":[]}},{"type":"text","value":" to change the rendered output:","position":{"start":{"line":4,"column":298,"offset":461},"end":{"line":4,"column":329,"offset":492},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":164},"end":{"line":4,"column":329,"offset":492},"indent":[]}},{"type":"html","lang":"jsx{8-11}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> element <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">  ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">    element<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":6,"column":1,"offset":494},"end":{"line":21,"column":4,"offset":759},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://codepen.io/gaearon/pen/gwoJZk?editors=0010","children":[{"type":"strong","children":[{"type":"text","value":"Try it on CodePen","position":{"start":{"line":23,"column":4,"offset":764},"end":{"line":23,"column":21,"offset":781},"indent":[]}}],"position":{"start":{"line":23,"column":2,"offset":762},"end":{"line":23,"column":23,"offset":783},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":761},"end":{"line":23,"column":76,"offset":836},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":23,"column":1,"offset":761},"end":{"line":23,"column":76,"offset":836},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this section, we will learn how to make the ","position":{"start":{"line":25,"column":1,"offset":838},"end":{"line":25,"column":48,"offset":885},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":25,"column":48,"offset":885},"end":{"line":25,"column":55,"offset":892},"indent":[]}},{"type":"text","value":" component truly reusable and encapsulated. It will set up its own timer and update itself every second.","position":{"start":{"line":25,"column":55,"offset":892},"end":{"line":25,"column":159,"offset":996},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":838},"end":{"line":25,"column":159,"offset":996},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can start by encapsulating how the clock looks:","position":{"start":{"line":27,"column":1,"offset":998},"end":{"line":27,"column":51,"offset":1048},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":998},"end":{"line":27,"column":51,"offset":1048},"indent":[]}},{"type":"html","lang":"jsx{3-6,12}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Clock</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></span>  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token attr-name\">date</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span></span>    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>tick<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":29,"column":1,"offset":1050},"end":{"line":47,"column":4,"offset":1355},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://codepen.io/gaearon/pen/dpdoYR?editors=0010","children":[{"type":"strong","children":[{"type":"text","value":"Try it on CodePen","position":{"start":{"line":49,"column":4,"offset":1360},"end":{"line":49,"column":21,"offset":1377},"indent":[]}}],"position":{"start":{"line":49,"column":2,"offset":1358},"end":{"line":49,"column":23,"offset":1379},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":1357},"end":{"line":49,"column":76,"offset":1432},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":49,"column":1,"offset":1357},"end":{"line":49,"column":76,"offset":1432},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"However, it misses a crucial requirement: the fact that the ","position":{"start":{"line":51,"column":1,"offset":1434},"end":{"line":51,"column":61,"offset":1494},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":51,"column":61,"offset":1494},"end":{"line":51,"column":68,"offset":1501},"indent":[]}},{"type":"text","value":" sets up a timer and updates the UI every second should be an implementation detail of the ","position":{"start":{"line":51,"column":68,"offset":1501},"end":{"line":51,"column":159,"offset":1592},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":51,"column":159,"offset":1592},"end":{"line":51,"column":166,"offset":1599},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":51,"column":166,"offset":1599},"end":{"line":51,"column":167,"offset":1600},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":1434},"end":{"line":51,"column":167,"offset":1600},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Ideally we want to write this once and have the ","position":{"start":{"line":53,"column":1,"offset":1602},"end":{"line":53,"column":49,"offset":1650},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":53,"column":49,"offset":1650},"end":{"line":53,"column":56,"offset":1657},"indent":[]}},{"type":"text","value":" update itself:","position":{"start":{"line":53,"column":56,"offset":1657},"end":{"line":53,"column":71,"offset":1672},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":1602},"end":{"line":53,"column":71,"offset":1672},"indent":[]}},{"type":"html","lang":"jsx{2}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span></span>  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":55,"column":1,"offset":1674},"end":{"line":60,"column":4,"offset":1753},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"To implement this, we need to add “state” to the ","position":{"start":{"line":62,"column":1,"offset":1755},"end":{"line":62,"column":50,"offset":1804},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":62,"column":50,"offset":1804},"end":{"line":62,"column":57,"offset":1811},"indent":[]}},{"type":"text","value":" component.","position":{"start":{"line":62,"column":57,"offset":1811},"end":{"line":62,"column":68,"offset":1822},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":1755},"end":{"line":62,"column":68,"offset":1822},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"State is similar to props, but it is private and fully controlled by the component.","position":{"start":{"line":64,"column":1,"offset":1824},"end":{"line":64,"column":84,"offset":1907},"indent":[]}}],"position":{"start":{"line":64,"column":1,"offset":1824},"end":{"line":64,"column":84,"offset":1907},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#converting-a-function-to-a-class","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Converting a Function to a Class ","position":{"start":{"line":66,"column":4,"offset":1912},"end":{"line":66,"column":72,"offset":1980},"indent":[]}}],"position":{"start":{"line":66,"column":1,"offset":1909},"end":{"line":66,"column":72,"offset":1980},"indent":[]},"data":{"id":"converting-a-function-to-a-class","htmlAttributes":{"id":"converting-a-function-to-a-class"},"hProperties":{"id":"converting-a-function-to-a-class"}}},{"type":"paragraph","children":[{"type":"text","value":"You can convert a function component like ","position":{"start":{"line":68,"column":1,"offset":1982},"end":{"line":68,"column":43,"offset":2024},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":68,"column":43,"offset":2024},"end":{"line":68,"column":50,"offset":2031},"indent":[]}},{"type":"text","value":" to a class in five steps:","position":{"start":{"line":68,"column":50,"offset":2031},"end":{"line":68,"column":76,"offset":2057},"indent":[]}}],"position":{"start":{"line":68,"column":1,"offset":1982},"end":{"line":68,"column":76,"offset":2057},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create an ","position":{"start":{"line":70,"column":4,"offset":2062},"end":{"line":70,"column":14,"offset":2072},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes","children":[{"type":"text","value":"ES6 class","position":{"start":{"line":70,"column":15,"offset":2073},"end":{"line":70,"column":24,"offset":2082},"indent":[]}}],"position":{"start":{"line":70,"column":14,"offset":2072},"end":{"line":70,"column":97,"offset":2155},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":", with the same name, that extends ","position":{"start":{"line":70,"column":97,"offset":2155},"end":{"line":70,"column":132,"offset":2190},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">React.Component</code>","position":{"start":{"line":70,"column":132,"offset":2190},"end":{"line":70,"column":149,"offset":2207},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":70,"column":149,"offset":2207},"end":{"line":70,"column":150,"offset":2208},"indent":[]}}],"position":{"start":{"line":70,"column":4,"offset":2062},"end":{"line":70,"column":150,"offset":2208},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2059},"end":{"line":71,"column":1,"offset":2209},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add a single empty method to it called ","position":{"start":{"line":72,"column":4,"offset":2213},"end":{"line":72,"column":43,"offset":2252},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render()</code>","position":{"start":{"line":72,"column":43,"offset":2252},"end":{"line":72,"column":53,"offset":2262},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":72,"column":53,"offset":2262},"end":{"line":72,"column":54,"offset":2263},"indent":[]}}],"position":{"start":{"line":72,"column":4,"offset":2213},"end":{"line":72,"column":54,"offset":2263},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2210},"end":{"line":73,"column":1,"offset":2264},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Move the body of the function into the ","position":{"start":{"line":74,"column":4,"offset":2268},"end":{"line":74,"column":43,"offset":2307},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render()</code>","position":{"start":{"line":74,"column":43,"offset":2307},"end":{"line":74,"column":53,"offset":2317},"indent":[]}},{"type":"text","value":" method.","position":{"start":{"line":74,"column":53,"offset":2317},"end":{"line":74,"column":61,"offset":2325},"indent":[]}}],"position":{"start":{"line":74,"column":4,"offset":2268},"end":{"line":74,"column":61,"offset":2325},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":2265},"end":{"line":75,"column":1,"offset":2326},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Replace ","position":{"start":{"line":76,"column":4,"offset":2330},"end":{"line":76,"column":12,"offset":2338},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">props</code>","position":{"start":{"line":76,"column":12,"offset":2338},"end":{"line":76,"column":19,"offset":2345},"indent":[]}},{"type":"text","value":" with ","position":{"start":{"line":76,"column":19,"offset":2345},"end":{"line":76,"column":25,"offset":2351},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.props</code>","position":{"start":{"line":76,"column":25,"offset":2351},"end":{"line":76,"column":37,"offset":2363},"indent":[]}},{"type":"text","value":" in the ","position":{"start":{"line":76,"column":37,"offset":2363},"end":{"line":76,"column":45,"offset":2371},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render()</code>","position":{"start":{"line":76,"column":45,"offset":2371},"end":{"line":76,"column":55,"offset":2381},"indent":[]}},{"type":"text","value":" body.","position":{"start":{"line":76,"column":55,"offset":2381},"end":{"line":76,"column":61,"offset":2387},"indent":[]}}],"position":{"start":{"line":76,"column":4,"offset":2330},"end":{"line":76,"column":61,"offset":2387},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2327},"end":{"line":77,"column":1,"offset":2388},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Delete the remaining empty function declaration.","position":{"start":{"line":78,"column":4,"offset":2392},"end":{"line":78,"column":52,"offset":2440},"indent":[]}}],"position":{"start":{"line":78,"column":4,"offset":2392},"end":{"line":78,"column":52,"offset":2440},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":2389},"end":{"line":78,"column":52,"offset":2440},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":2059},"end":{"line":78,"column":52,"offset":2440},"indent":[1,1,1,1,1,1,1,1]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":80,"column":1,"offset":2442},"end":{"line":91,"column":4,"offset":2647},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://codepen.io/gaearon/pen/zKRGpo?editors=0010","children":[{"type":"strong","children":[{"type":"text","value":"Try it on CodePen","position":{"start":{"line":93,"column":4,"offset":2652},"end":{"line":93,"column":21,"offset":2669},"indent":[]}}],"position":{"start":{"line":93,"column":2,"offset":2650},"end":{"line":93,"column":23,"offset":2671},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":2649},"end":{"line":93,"column":76,"offset":2724},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":93,"column":1,"offset":2649},"end":{"line":93,"column":76,"offset":2724},"indent":[]}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":95,"column":1,"offset":2726},"end":{"line":95,"column":8,"offset":2733},"indent":[]}},{"type":"text","value":" is now defined as a class rather than a function.","position":{"start":{"line":95,"column":8,"offset":2733},"end":{"line":95,"column":58,"offset":2783},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":2726},"end":{"line":95,"column":58,"offset":2783},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":97,"column":1,"offset":2785},"end":{"line":97,"column":5,"offset":2789},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render</code>","position":{"start":{"line":97,"column":5,"offset":2789},"end":{"line":97,"column":13,"offset":2797},"indent":[]}},{"type":"text","value":" method will be called each time an update happens, but as long as we render ","position":{"start":{"line":97,"column":13,"offset":2797},"end":{"line":97,"column":90,"offset":2874},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">&lt;Clock /&gt;</code>","position":{"start":{"line":97,"column":90,"offset":2874},"end":{"line":97,"column":101,"offset":2885},"indent":[]}},{"type":"text","value":" into the same DOM node, only a single instance of the ","position":{"start":{"line":97,"column":101,"offset":2885},"end":{"line":97,"column":156,"offset":2940},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":97,"column":156,"offset":2940},"end":{"line":97,"column":163,"offset":2947},"indent":[]}},{"type":"text","value":" class will be used. This lets us use additional features such as local state and lifecycle methods.","position":{"start":{"line":97,"column":163,"offset":2947},"end":{"line":97,"column":263,"offset":3047},"indent":[]}}],"position":{"start":{"line":97,"column":1,"offset":2785},"end":{"line":97,"column":263,"offset":3047},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#adding-local-state-to-a-class","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Adding Local State to a Class ","position":{"start":{"line":99,"column":4,"offset":3052},"end":{"line":99,"column":66,"offset":3114},"indent":[]}}],"position":{"start":{"line":99,"column":1,"offset":3049},"end":{"line":99,"column":66,"offset":3114},"indent":[]},"data":{"id":"adding-local-state-to-a-class","htmlAttributes":{"id":"adding-local-state-to-a-class"},"hProperties":{"id":"adding-local-state-to-a-class"}}},{"type":"paragraph","children":[{"type":"text","value":"We will move the ","position":{"start":{"line":101,"column":1,"offset":3116},"end":{"line":101,"column":18,"offset":3133},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">date</code>","position":{"start":{"line":101,"column":18,"offset":3133},"end":{"line":101,"column":24,"offset":3139},"indent":[]}},{"type":"text","value":" from props to state in three steps:","position":{"start":{"line":101,"column":24,"offset":3139},"end":{"line":101,"column":60,"offset":3175},"indent":[]}}],"position":{"start":{"line":101,"column":1,"offset":3116},"end":{"line":101,"column":60,"offset":3175},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Replace ","position":{"start":{"line":103,"column":4,"offset":3180},"end":{"line":103,"column":12,"offset":3188},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.props.date</code>","position":{"start":{"line":103,"column":12,"offset":3188},"end":{"line":103,"column":29,"offset":3205},"indent":[]}},{"type":"text","value":" with ","position":{"start":{"line":103,"column":29,"offset":3205},"end":{"line":103,"column":35,"offset":3211},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state.date</code>","position":{"start":{"line":103,"column":35,"offset":3211},"end":{"line":103,"column":52,"offset":3228},"indent":[]}},{"type":"text","value":" in the ","position":{"start":{"line":103,"column":52,"offset":3228},"end":{"line":103,"column":60,"offset":3236},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render()</code>","position":{"start":{"line":103,"column":60,"offset":3236},"end":{"line":103,"column":70,"offset":3246},"indent":[]}},{"type":"text","value":" method:","position":{"start":{"line":103,"column":70,"offset":3246},"end":{"line":103,"column":78,"offset":3254},"indent":[]}}],"position":{"start":{"line":103,"column":4,"offset":3180},"end":{"line":103,"column":78,"offset":3254},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":3177},"end":{"line":103,"column":78,"offset":3254},"indent":[]}}],"position":{"start":{"line":103,"column":1,"offset":3177},"end":{"line":103,"column":78,"offset":3254},"indent":[]}},{"type":"html","lang":"jsx{6}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":105,"column":1,"offset":3256},"end":{"line":116,"column":4,"offset":3464},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"list","ordered":true,"start":2,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add a ","position":{"start":{"line":118,"column":4,"offset":3469},"end":{"line":118,"column":10,"offset":3475},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes#Constructor","children":[{"type":"text","value":"class constructor","position":{"start":{"line":118,"column":11,"offset":3476},"end":{"line":118,"column":28,"offset":3493},"indent":[]}}],"position":{"start":{"line":118,"column":10,"offset":3475},"end":{"line":118,"column":113,"offset":3578},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" that assigns the initial ","position":{"start":{"line":118,"column":113,"offset":3578},"end":{"line":118,"column":139,"offset":3604},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state</code>","position":{"start":{"line":118,"column":139,"offset":3604},"end":{"line":118,"column":151,"offset":3616},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":118,"column":151,"offset":3616},"end":{"line":118,"column":152,"offset":3617},"indent":[]}}],"position":{"start":{"line":118,"column":4,"offset":3469},"end":{"line":118,"column":152,"offset":3617},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":3466},"end":{"line":118,"column":152,"offset":3617},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":3466},"end":{"line":118,"column":152,"offset":3617},"indent":[]}},{"type":"html","lang":"jsx{4}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>date<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":120,"column":1,"offset":3619},"end":{"line":136,"column":4,"offset":3910},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note how we pass ","position":{"start":{"line":138,"column":1,"offset":3912},"end":{"line":138,"column":18,"offset":3929},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">props</code>","position":{"start":{"line":138,"column":18,"offset":3929},"end":{"line":138,"column":25,"offset":3936},"indent":[]}},{"type":"text","value":" to the base constructor:","position":{"start":{"line":138,"column":25,"offset":3936},"end":{"line":138,"column":50,"offset":3961},"indent":[]}}],"position":{"start":{"line":138,"column":1,"offset":3912},"end":{"line":138,"column":50,"offset":3961},"indent":[]}},{"type":"html","lang":"jsx{2}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>date<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":140,"column":1,"offset":3963},"end":{"line":145,"column":4,"offset":4057},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Class components should always call the base constructor with ","position":{"start":{"line":147,"column":1,"offset":4059},"end":{"line":147,"column":63,"offset":4121},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">props</code>","position":{"start":{"line":147,"column":63,"offset":4121},"end":{"line":147,"column":70,"offset":4128},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":147,"column":70,"offset":4128},"end":{"line":147,"column":71,"offset":4129},"indent":[]}}],"position":{"start":{"line":147,"column":1,"offset":4059},"end":{"line":147,"column":71,"offset":4129},"indent":[]}},{"type":"list","ordered":true,"start":3,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Remove the ","position":{"start":{"line":149,"column":4,"offset":4134},"end":{"line":149,"column":15,"offset":4145},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">date</code>","position":{"start":{"line":149,"column":15,"offset":4145},"end":{"line":149,"column":21,"offset":4151},"indent":[]}},{"type":"text","value":" prop from the ","position":{"start":{"line":149,"column":21,"offset":4151},"end":{"line":149,"column":36,"offset":4166},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">&lt;Clock /&gt;</code>","position":{"start":{"line":149,"column":36,"offset":4166},"end":{"line":149,"column":47,"offset":4177},"indent":[]}},{"type":"text","value":" element:","position":{"start":{"line":149,"column":47,"offset":4177},"end":{"line":149,"column":56,"offset":4186},"indent":[]}}],"position":{"start":{"line":149,"column":4,"offset":4134},"end":{"line":149,"column":56,"offset":4186},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":4131},"end":{"line":149,"column":56,"offset":4186},"indent":[]}}],"position":{"start":{"line":149,"column":1,"offset":4131},"end":{"line":149,"column":56,"offset":4186},"indent":[]}},{"type":"html","lang":"jsx{2}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span></span>  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":151,"column":1,"offset":4188},"end":{"line":156,"column":4,"offset":4267},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We will later add the timer code back to the component itself.","position":{"start":{"line":158,"column":1,"offset":4269},"end":{"line":158,"column":63,"offset":4331},"indent":[]}}],"position":{"start":{"line":158,"column":1,"offset":4269},"end":{"line":158,"column":63,"offset":4331},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The result looks like this:","position":{"start":{"line":160,"column":1,"offset":4333},"end":{"line":160,"column":28,"offset":4360},"indent":[]}}],"position":{"start":{"line":160,"column":1,"offset":4333},"end":{"line":160,"column":28,"offset":4360},"indent":[]}},{"type":"html","lang":"jsx{2-5,11,18}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>date<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span></span>  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":162,"column":1,"offset":4362},"end":{"line":183,"column":4,"offset":4729},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://codepen.io/gaearon/pen/KgQpJd?editors=0010","children":[{"type":"strong","children":[{"type":"text","value":"Try it on CodePen","position":{"start":{"line":185,"column":4,"offset":4734},"end":{"line":185,"column":21,"offset":4751},"indent":[]}}],"position":{"start":{"line":185,"column":2,"offset":4732},"end":{"line":185,"column":23,"offset":4753},"indent":[]}}],"position":{"start":{"line":185,"column":1,"offset":4731},"end":{"line":185,"column":76,"offset":4806},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":185,"column":1,"offset":4731},"end":{"line":185,"column":76,"offset":4806},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Next, we’ll make the ","position":{"start":{"line":187,"column":1,"offset":4808},"end":{"line":187,"column":22,"offset":4829},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":187,"column":22,"offset":4829},"end":{"line":187,"column":29,"offset":4836},"indent":[]}},{"type":"text","value":" set up its own timer and update itself every second.","position":{"start":{"line":187,"column":29,"offset":4836},"end":{"line":187,"column":82,"offset":4889},"indent":[]}}],"position":{"start":{"line":187,"column":1,"offset":4808},"end":{"line":187,"column":82,"offset":4889},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#adding-lifecycle-methods-to-a-class","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Adding Lifecycle Methods to a Class ","position":{"start":{"line":189,"column":4,"offset":4894},"end":{"line":189,"column":78,"offset":4968},"indent":[]}}],"position":{"start":{"line":189,"column":1,"offset":4891},"end":{"line":189,"column":78,"offset":4968},"indent":[]},"data":{"id":"adding-lifecycle-methods-to-a-class","htmlAttributes":{"id":"adding-lifecycle-methods-to-a-class"},"hProperties":{"id":"adding-lifecycle-methods-to-a-class"}}},{"type":"paragraph","children":[{"type":"text","value":"In applications with many components, it’s very important to free up resources taken by the components when they are destroyed.","position":{"start":{"line":191,"column":1,"offset":4970},"end":{"line":191,"column":128,"offset":5097},"indent":[]}}],"position":{"start":{"line":191,"column":1,"offset":4970},"end":{"line":191,"column":128,"offset":5097},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We want to ","position":{"start":{"line":193,"column":1,"offset":5099},"end":{"line":193,"column":12,"offset":5110},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/setInterval","children":[{"type":"text","value":"set up a timer","position":{"start":{"line":193,"column":13,"offset":5111},"end":{"line":193,"column":27,"offset":5125},"indent":[]}}],"position":{"start":{"line":193,"column":12,"offset":5110},"end":{"line":193,"column":103,"offset":5201},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" whenever the ","position":{"start":{"line":193,"column":103,"offset":5201},"end":{"line":193,"column":117,"offset":5215},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":193,"column":117,"offset":5215},"end":{"line":193,"column":124,"offset":5222},"indent":[]}},{"type":"text","value":" is rendered to the DOM for the first time. This is called “mounting” in React.","position":{"start":{"line":193,"column":124,"offset":5222},"end":{"line":193,"column":203,"offset":5301},"indent":[]}}],"position":{"start":{"line":193,"column":1,"offset":5099},"end":{"line":193,"column":203,"offset":5301},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We also want to ","position":{"start":{"line":195,"column":1,"offset":5303},"end":{"line":195,"column":17,"offset":5319},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en-US/docs/Web/API/WindowTimers/clearInterval","children":[{"type":"text","value":"clear that timer","position":{"start":{"line":195,"column":18,"offset":5320},"end":{"line":195,"column":34,"offset":5336},"indent":[]}}],"position":{"start":{"line":195,"column":17,"offset":5319},"end":{"line":195,"column":112,"offset":5414},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" whenever the DOM produced by the ","position":{"start":{"line":195,"column":112,"offset":5414},"end":{"line":195,"column":146,"offset":5448},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":195,"column":146,"offset":5448},"end":{"line":195,"column":153,"offset":5455},"indent":[]}},{"type":"text","value":" is removed. This is called “unmounting” in React.","position":{"start":{"line":195,"column":153,"offset":5455},"end":{"line":195,"column":203,"offset":5505},"indent":[]}}],"position":{"start":{"line":195,"column":1,"offset":5303},"end":{"line":195,"column":203,"offset":5505},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We can declare special methods on the component class to run some code when a component mounts and unmounts:","position":{"start":{"line":197,"column":1,"offset":5507},"end":{"line":197,"column":109,"offset":5615},"indent":[]}}],"position":{"start":{"line":197,"column":1,"offset":5507},"end":{"line":197,"column":109,"offset":5615},"indent":[]}},{"type":"html","lang":"jsx{7-9,11-13}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>date<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\"></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":199,"column":1,"offset":5617},"end":{"line":223,"column":4,"offset":5979},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"These methods are called “lifecycle methods”.","position":{"start":{"line":225,"column":1,"offset":5981},"end":{"line":225,"column":46,"offset":6026},"indent":[]}}],"position":{"start":{"line":225,"column":1,"offset":5981},"end":{"line":225,"column":46,"offset":6026},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":227,"column":1,"offset":6028},"end":{"line":227,"column":5,"offset":6032},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount()</code>","position":{"start":{"line":227,"column":5,"offset":6032},"end":{"line":227,"column":26,"offset":6053},"indent":[]}},{"type":"text","value":" method runs after the component output has been rendered to the DOM. This is a good place to set up a timer:","position":{"start":{"line":227,"column":26,"offset":6053},"end":{"line":227,"column":135,"offset":6162},"indent":[]}}],"position":{"start":{"line":227,"column":1,"offset":6028},"end":{"line":227,"column":135,"offset":6162},"indent":[]}},{"type":"html","lang":"jsx{2-5}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timerID <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token number\">1000</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":229,"column":1,"offset":6164},"end":{"line":236,"column":4,"offset":6281},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Note how we save the timer ID right on ","position":{"start":{"line":238,"column":1,"offset":6283},"end":{"line":238,"column":40,"offset":6322},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this</code>","position":{"start":{"line":238,"column":40,"offset":6322},"end":{"line":238,"column":46,"offset":6328},"indent":[]}},{"type":"text","value":" (","position":{"start":{"line":238,"column":46,"offset":6328},"end":{"line":238,"column":48,"offset":6330},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.timerID</code>","position":{"start":{"line":238,"column":48,"offset":6330},"end":{"line":238,"column":62,"offset":6344},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":238,"column":62,"offset":6344},"end":{"line":238,"column":64,"offset":6346},"indent":[]}}],"position":{"start":{"line":238,"column":1,"offset":6283},"end":{"line":238,"column":64,"offset":6346},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"While ","position":{"start":{"line":240,"column":1,"offset":6348},"end":{"line":240,"column":7,"offset":6354},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.props</code>","position":{"start":{"line":240,"column":7,"offset":6354},"end":{"line":240,"column":19,"offset":6366},"indent":[]}},{"type":"text","value":" is set up by React itself and ","position":{"start":{"line":240,"column":19,"offset":6366},"end":{"line":240,"column":50,"offset":6397},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state</code>","position":{"start":{"line":240,"column":50,"offset":6397},"end":{"line":240,"column":62,"offset":6409},"indent":[]}},{"type":"text","value":" has a special meaning, you are free to add additional fields to the class manually if you need to store something that doesn’t participate in the data flow (like a timer ID).","position":{"start":{"line":240,"column":62,"offset":6409},"end":{"line":240,"column":237,"offset":6584},"indent":[]}}],"position":{"start":{"line":240,"column":1,"offset":6348},"end":{"line":240,"column":237,"offset":6584},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We will tear down the timer in the ","position":{"start":{"line":242,"column":1,"offset":6586},"end":{"line":242,"column":36,"offset":6621},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentWillUnmount()</code>","position":{"start":{"line":242,"column":36,"offset":6621},"end":{"line":242,"column":60,"offset":6645},"indent":[]}},{"type":"text","value":" lifecycle method:","position":{"start":{"line":242,"column":60,"offset":6645},"end":{"line":242,"column":78,"offset":6663},"indent":[]}}],"position":{"start":{"line":242,"column":1,"offset":6586},"end":{"line":242,"column":78,"offset":6663},"indent":[]}},{"type":"html","lang":"jsx{2}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timerID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":244,"column":1,"offset":6665},"end":{"line":248,"column":4,"offset":6741},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Finally, we will implement a method called ","position":{"start":{"line":250,"column":1,"offset":6743},"end":{"line":250,"column":44,"offset":6786},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">tick()</code>","position":{"start":{"line":250,"column":44,"offset":6786},"end":{"line":250,"column":52,"offset":6794},"indent":[]}},{"type":"text","value":" that the ","position":{"start":{"line":250,"column":52,"offset":6794},"end":{"line":250,"column":62,"offset":6804},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":250,"column":62,"offset":6804},"end":{"line":250,"column":69,"offset":6811},"indent":[]}},{"type":"text","value":" component will run every second.","position":{"start":{"line":250,"column":69,"offset":6811},"end":{"line":250,"column":102,"offset":6844},"indent":[]}}],"position":{"start":{"line":250,"column":1,"offset":6743},"end":{"line":250,"column":102,"offset":6844},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"It will use ","position":{"start":{"line":252,"column":1,"offset":6846},"end":{"line":252,"column":13,"offset":6858},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.setState()</code>","position":{"start":{"line":252,"column":13,"offset":6858},"end":{"line":252,"column":30,"offset":6875},"indent":[]}},{"type":"text","value":" to schedule updates to the component local state:","position":{"start":{"line":252,"column":30,"offset":6875},"end":{"line":252,"column":80,"offset":6925},"indent":[]}}],"position":{"start":{"line":252,"column":1,"offset":6846},"end":{"line":252,"column":80,"offset":6925},"indent":[]}},{"type":"html","lang":"jsx{18-22}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Clock</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>date<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timerID <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>\n      <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token number\">1000</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillUnmount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>timerID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function\">tick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      date<span class=\"token operator\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Hello, world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":254,"column":1,"offset":6927},"end":{"line":292,"column":4,"offset":7526},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://codepen.io/gaearon/pen/amqdNA?editors=0010","children":[{"type":"strong","children":[{"type":"text","value":"Try it on CodePen","position":{"start":{"line":294,"column":4,"offset":7531},"end":{"line":294,"column":21,"offset":7548},"indent":[]}}],"position":{"start":{"line":294,"column":2,"offset":7529},"end":{"line":294,"column":23,"offset":7550},"indent":[]}}],"position":{"start":{"line":294,"column":1,"offset":7528},"end":{"line":294,"column":76,"offset":7603},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":294,"column":1,"offset":7528},"end":{"line":294,"column":76,"offset":7603},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now the clock ticks every second.","position":{"start":{"line":296,"column":1,"offset":7605},"end":{"line":296,"column":34,"offset":7638},"indent":[]}}],"position":{"start":{"line":296,"column":1,"offset":7605},"end":{"line":296,"column":34,"offset":7638},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Let’s quickly recap what’s going on and the order in which the methods are called:","position":{"start":{"line":298,"column":1,"offset":7640},"end":{"line":298,"column":83,"offset":7722},"indent":[]}}],"position":{"start":{"line":298,"column":1,"offset":7640},"end":{"line":298,"column":83,"offset":7722},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"When ","position":{"start":{"line":300,"column":4,"offset":7727},"end":{"line":300,"column":9,"offset":7732},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">&lt;Clock /&gt;</code>","position":{"start":{"line":300,"column":9,"offset":7732},"end":{"line":300,"column":20,"offset":7743},"indent":[]}},{"type":"text","value":" is passed to ","position":{"start":{"line":300,"column":20,"offset":7743},"end":{"line":300,"column":34,"offset":7757},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">ReactDOM.render()</code>","position":{"start":{"line":300,"column":34,"offset":7757},"end":{"line":300,"column":53,"offset":7776},"indent":[]}},{"type":"text","value":", React calls the constructor of the ","position":{"start":{"line":300,"column":53,"offset":7776},"end":{"line":300,"column":90,"offset":7813},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":300,"column":90,"offset":7813},"end":{"line":300,"column":97,"offset":7820},"indent":[]}},{"type":"text","value":" component. Since ","position":{"start":{"line":300,"column":97,"offset":7820},"end":{"line":300,"column":115,"offset":7838},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":300,"column":115,"offset":7838},"end":{"line":300,"column":122,"offset":7845},"indent":[]}},{"type":"text","value":" needs to display the current time, it initializes ","position":{"start":{"line":300,"column":122,"offset":7845},"end":{"line":300,"column":173,"offset":7896},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state</code>","position":{"start":{"line":300,"column":173,"offset":7896},"end":{"line":300,"column":185,"offset":7908},"indent":[]}},{"type":"text","value":" with an object including the current time. We will later update this state.","position":{"start":{"line":300,"column":185,"offset":7908},"end":{"line":300,"column":261,"offset":7984},"indent":[]}}],"position":{"start":{"line":300,"column":4,"offset":7727},"end":{"line":300,"column":261,"offset":7984},"indent":[]}}],"position":{"start":{"line":300,"column":1,"offset":7724},"end":{"line":301,"column":1,"offset":7985},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"React then calls the ","position":{"start":{"line":302,"column":4,"offset":7989},"end":{"line":302,"column":25,"offset":8010},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":302,"column":25,"offset":8010},"end":{"line":302,"column":32,"offset":8017},"indent":[]}},{"type":"text","value":" component’s ","position":{"start":{"line":302,"column":32,"offset":8017},"end":{"line":302,"column":45,"offset":8030},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render()</code>","position":{"start":{"line":302,"column":45,"offset":8030},"end":{"line":302,"column":55,"offset":8040},"indent":[]}},{"type":"text","value":" method. This is how React learns what should be displayed on the screen. React then updates the DOM to match the ","position":{"start":{"line":302,"column":55,"offset":8040},"end":{"line":302,"column":169,"offset":8154},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":302,"column":169,"offset":8154},"end":{"line":302,"column":176,"offset":8161},"indent":[]}},{"type":"text","value":"’s render output.","position":{"start":{"line":302,"column":176,"offset":8161},"end":{"line":302,"column":193,"offset":8178},"indent":[]}}],"position":{"start":{"line":302,"column":4,"offset":7989},"end":{"line":302,"column":193,"offset":8178},"indent":[]}}],"position":{"start":{"line":302,"column":1,"offset":7986},"end":{"line":303,"column":1,"offset":8179},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"When the ","position":{"start":{"line":304,"column":4,"offset":8183},"end":{"line":304,"column":13,"offset":8192},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":304,"column":13,"offset":8192},"end":{"line":304,"column":20,"offset":8199},"indent":[]}},{"type":"text","value":" output is inserted in the DOM, React calls the ","position":{"start":{"line":304,"column":20,"offset":8199},"end":{"line":304,"column":68,"offset":8247},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentDidMount()</code>","position":{"start":{"line":304,"column":68,"offset":8247},"end":{"line":304,"column":89,"offset":8268},"indent":[]}},{"type":"text","value":" lifecycle method. Inside it, the ","position":{"start":{"line":304,"column":89,"offset":8268},"end":{"line":304,"column":123,"offset":8302},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":304,"column":123,"offset":8302},"end":{"line":304,"column":130,"offset":8309},"indent":[]}},{"type":"text","value":" component asks the browser to set up a timer to call the component’s ","position":{"start":{"line":304,"column":130,"offset":8309},"end":{"line":304,"column":200,"offset":8379},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">tick()</code>","position":{"start":{"line":304,"column":200,"offset":8379},"end":{"line":304,"column":208,"offset":8387},"indent":[]}},{"type":"text","value":" method once a second.","position":{"start":{"line":304,"column":208,"offset":8387},"end":{"line":304,"column":230,"offset":8409},"indent":[]}}],"position":{"start":{"line":304,"column":4,"offset":8183},"end":{"line":304,"column":230,"offset":8409},"indent":[]}}],"position":{"start":{"line":304,"column":1,"offset":8180},"end":{"line":305,"column":1,"offset":8410},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Every second the browser calls the ","position":{"start":{"line":306,"column":4,"offset":8414},"end":{"line":306,"column":39,"offset":8449},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">tick()</code>","position":{"start":{"line":306,"column":39,"offset":8449},"end":{"line":306,"column":47,"offset":8457},"indent":[]}},{"type":"text","value":" method. Inside it, the ","position":{"start":{"line":306,"column":47,"offset":8457},"end":{"line":306,"column":71,"offset":8481},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":306,"column":71,"offset":8481},"end":{"line":306,"column":78,"offset":8488},"indent":[]}},{"type":"text","value":" component schedules a UI update by calling ","position":{"start":{"line":306,"column":78,"offset":8488},"end":{"line":306,"column":122,"offset":8532},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">setState()</code>","position":{"start":{"line":306,"column":122,"offset":8532},"end":{"line":306,"column":134,"offset":8544},"indent":[]}},{"type":"text","value":" with an object containing the current time. Thanks to the ","position":{"start":{"line":306,"column":134,"offset":8544},"end":{"line":306,"column":193,"offset":8603},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">setState()</code>","position":{"start":{"line":306,"column":193,"offset":8603},"end":{"line":306,"column":205,"offset":8615},"indent":[]}},{"type":"text","value":" call, React knows the state has changed, and calls the ","position":{"start":{"line":306,"column":205,"offset":8615},"end":{"line":306,"column":261,"offset":8671},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render()</code>","position":{"start":{"line":306,"column":261,"offset":8671},"end":{"line":306,"column":271,"offset":8681},"indent":[]}},{"type":"text","value":" method again to learn what should be on the screen. This time, ","position":{"start":{"line":306,"column":271,"offset":8681},"end":{"line":306,"column":335,"offset":8745},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state.date</code>","position":{"start":{"line":306,"column":335,"offset":8745},"end":{"line":306,"column":352,"offset":8762},"indent":[]}},{"type":"text","value":" in the ","position":{"start":{"line":306,"column":352,"offset":8762},"end":{"line":306,"column":360,"offset":8770},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">render()</code>","position":{"start":{"line":306,"column":360,"offset":8770},"end":{"line":306,"column":370,"offset":8780},"indent":[]}},{"type":"text","value":" method will be different, and so the render output will include the updated time. React updates the DOM accordingly.","position":{"start":{"line":306,"column":370,"offset":8780},"end":{"line":306,"column":487,"offset":8897},"indent":[]}}],"position":{"start":{"line":306,"column":4,"offset":8414},"end":{"line":306,"column":487,"offset":8897},"indent":[]}}],"position":{"start":{"line":306,"column":1,"offset":8411},"end":{"line":307,"column":1,"offset":8898},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If the ","position":{"start":{"line":308,"column":4,"offset":8902},"end":{"line":308,"column":11,"offset":8909},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":308,"column":11,"offset":8909},"end":{"line":308,"column":18,"offset":8916},"indent":[]}},{"type":"text","value":" component is ever removed from the DOM, React calls the ","position":{"start":{"line":308,"column":18,"offset":8916},"end":{"line":308,"column":75,"offset":8973},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">componentWillUnmount()</code>","position":{"start":{"line":308,"column":75,"offset":8973},"end":{"line":308,"column":99,"offset":8997},"indent":[]}},{"type":"text","value":" lifecycle method so the timer is stopped.","position":{"start":{"line":308,"column":99,"offset":8997},"end":{"line":308,"column":141,"offset":9039},"indent":[]}}],"position":{"start":{"line":308,"column":4,"offset":8902},"end":{"line":308,"column":141,"offset":9039},"indent":[]}}],"position":{"start":{"line":308,"column":1,"offset":8899},"end":{"line":308,"column":141,"offset":9039},"indent":[]}}],"position":{"start":{"line":300,"column":1,"offset":7724},"end":{"line":308,"column":141,"offset":9039},"indent":[1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#using-state-correctly","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Using State Correctly ","position":{"start":{"line":310,"column":4,"offset":9044},"end":{"line":310,"column":50,"offset":9090},"indent":[]}}],"position":{"start":{"line":310,"column":1,"offset":9041},"end":{"line":310,"column":50,"offset":9090},"indent":[]},"data":{"id":"using-state-correctly","htmlAttributes":{"id":"using-state-correctly"},"hProperties":{"id":"using-state-correctly"}}},{"type":"paragraph","children":[{"type":"text","value":"There are three things you should know about ","position":{"start":{"line":312,"column":1,"offset":9092},"end":{"line":312,"column":46,"offset":9137},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">setState()</code>","position":{"start":{"line":312,"column":46,"offset":9137},"end":{"line":312,"column":58,"offset":9149},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":312,"column":58,"offset":9149},"end":{"line":312,"column":59,"offset":9150},"indent":[]}}],"position":{"start":{"line":312,"column":1,"offset":9092},"end":{"line":312,"column":59,"offset":9150},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#do-not-modify-state-directly","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Do Not Modify State Directly ","position":{"start":{"line":314,"column":5,"offset":9156},"end":{"line":314,"column":65,"offset":9216},"indent":[]}}],"position":{"start":{"line":314,"column":1,"offset":9152},"end":{"line":314,"column":65,"offset":9216},"indent":[]},"data":{"id":"do-not-modify-state-directly","htmlAttributes":{"id":"do-not-modify-state-directly"},"hProperties":{"id":"do-not-modify-state-directly"}}},{"type":"paragraph","children":[{"type":"text","value":"For example, this will not re-render a component:","position":{"start":{"line":316,"column":1,"offset":9218},"end":{"line":316,"column":50,"offset":9267},"indent":[]}}],"position":{"start":{"line":316,"column":1,"offset":9218},"end":{"line":316,"column":50,"offset":9267},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// Wrong</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>comment <span class=\"token operator\">=</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":318,"column":1,"offset":9269},"end":{"line":321,"column":4,"offset":9317},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Instead, use ","position":{"start":{"line":323,"column":1,"offset":9319},"end":{"line":323,"column":14,"offset":9332},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">setState()</code>","position":{"start":{"line":323,"column":14,"offset":9332},"end":{"line":323,"column":26,"offset":9344},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":323,"column":26,"offset":9344},"end":{"line":323,"column":27,"offset":9345},"indent":[]}}],"position":{"start":{"line":323,"column":1,"offset":9319},"end":{"line":323,"column":27,"offset":9345},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// Correct</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>comment<span class=\"token operator\">:</span> <span class=\"token string\">'Hello'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":325,"column":1,"offset":9347},"end":{"line":328,"column":4,"offset":9402},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The only place where you can assign ","position":{"start":{"line":330,"column":1,"offset":9404},"end":{"line":330,"column":37,"offset":9440},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state</code>","position":{"start":{"line":330,"column":37,"offset":9440},"end":{"line":330,"column":49,"offset":9452},"indent":[]}},{"type":"text","value":" is the constructor.","position":{"start":{"line":330,"column":49,"offset":9452},"end":{"line":330,"column":69,"offset":9472},"indent":[]}}],"position":{"start":{"line":330,"column":1,"offset":9404},"end":{"line":330,"column":69,"offset":9472},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#state-updates-may-be-asynchronous","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"State Updates May Be Asynchronous ","position":{"start":{"line":332,"column":5,"offset":9478},"end":{"line":332,"column":75,"offset":9548},"indent":[]}}],"position":{"start":{"line":332,"column":1,"offset":9474},"end":{"line":332,"column":75,"offset":9548},"indent":[]},"data":{"id":"state-updates-may-be-asynchronous","htmlAttributes":{"id":"state-updates-may-be-asynchronous"},"hProperties":{"id":"state-updates-may-be-asynchronous"}}},{"type":"paragraph","children":[{"type":"text","value":"React may batch multiple ","position":{"start":{"line":334,"column":1,"offset":9550},"end":{"line":334,"column":26,"offset":9575},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">setState()</code>","position":{"start":{"line":334,"column":26,"offset":9575},"end":{"line":334,"column":38,"offset":9587},"indent":[]}},{"type":"text","value":" calls into a single update for performance.","position":{"start":{"line":334,"column":38,"offset":9587},"end":{"line":334,"column":82,"offset":9631},"indent":[]}}],"position":{"start":{"line":334,"column":1,"offset":9550},"end":{"line":334,"column":82,"offset":9631},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Because ","position":{"start":{"line":336,"column":1,"offset":9633},"end":{"line":336,"column":9,"offset":9641},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.props</code>","position":{"start":{"line":336,"column":9,"offset":9641},"end":{"line":336,"column":21,"offset":9653},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":336,"column":21,"offset":9653},"end":{"line":336,"column":26,"offset":9658},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state</code>","position":{"start":{"line":336,"column":26,"offset":9658},"end":{"line":336,"column":38,"offset":9670},"indent":[]}},{"type":"text","value":" may be updated asynchronously, you should not rely on their values for calculating the next state.","position":{"start":{"line":336,"column":38,"offset":9670},"end":{"line":336,"column":137,"offset":9769},"indent":[]}}],"position":{"start":{"line":336,"column":1,"offset":9633},"end":{"line":336,"column":137,"offset":9769},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, this code may fail to update the counter:","position":{"start":{"line":338,"column":1,"offset":9771},"end":{"line":338,"column":55,"offset":9825},"indent":[]}}],"position":{"start":{"line":338,"column":1,"offset":9771},"end":{"line":338,"column":55,"offset":9825},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// Wrong</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  counter<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">+</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>increment<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":340,"column":1,"offset":9827},"end":{"line":345,"column":4,"offset":9919},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"To fix it, use a second form of ","position":{"start":{"line":347,"column":1,"offset":9921},"end":{"line":347,"column":33,"offset":9953},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">setState()</code>","position":{"start":{"line":347,"column":33,"offset":9953},"end":{"line":347,"column":45,"offset":9965},"indent":[]}},{"type":"text","value":" that accepts a function rather than an object. That function will receive the previous state as the first argument, and the props at the time the update is applied as the second argument:","position":{"start":{"line":347,"column":45,"offset":9965},"end":{"line":347,"column":233,"offset":10153},"indent":[]}}],"position":{"start":{"line":347,"column":1,"offset":9921},"end":{"line":347,"column":233,"offset":10153},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// Correct</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  counter<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>increment\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":349,"column":1,"offset":10155},"end":{"line":354,"column":4,"offset":10258},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"We used an ","position":{"start":{"line":356,"column":1,"offset":10260},"end":{"line":356,"column":12,"offset":10271},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Functions/Arrow_functions","children":[{"type":"text","value":"arrow function","position":{"start":{"line":356,"column":13,"offset":10272},"end":{"line":356,"column":27,"offset":10286},"indent":[]}}],"position":{"start":{"line":356,"column":12,"offset":10271},"end":{"line":356,"column":118,"offset":10377},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" above, but it also works with regular functions:","position":{"start":{"line":356,"column":118,"offset":10377},"end":{"line":356,"column":167,"offset":10426},"indent":[]}}],"position":{"start":{"line":356,"column":1,"offset":10260},"end":{"line":356,"column":167,"offset":10426},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// Correct</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    counter<span class=\"token operator\">:</span> state<span class=\"token punctuation\">.</span>counter <span class=\"token operator\">+</span> props<span class=\"token punctuation\">.</span>increment\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":358,"column":1,"offset":10428},"end":{"line":365,"column":4,"offset":10552},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#state-updates-are-merged","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"State Updates are Merged ","position":{"start":{"line":367,"column":5,"offset":10558},"end":{"line":367,"column":57,"offset":10610},"indent":[]}}],"position":{"start":{"line":367,"column":1,"offset":10554},"end":{"line":367,"column":57,"offset":10610},"indent":[]},"data":{"id":"state-updates-are-merged","htmlAttributes":{"id":"state-updates-are-merged"},"hProperties":{"id":"state-updates-are-merged"}}},{"type":"paragraph","children":[{"type":"text","value":"When you call ","position":{"start":{"line":369,"column":1,"offset":10612},"end":{"line":369,"column":15,"offset":10626},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">setState()</code>","position":{"start":{"line":369,"column":15,"offset":10626},"end":{"line":369,"column":27,"offset":10638},"indent":[]}},{"type":"text","value":", React merges the object you provide into the current state.","position":{"start":{"line":369,"column":27,"offset":10638},"end":{"line":369,"column":88,"offset":10699},"indent":[]}}],"position":{"start":{"line":369,"column":1,"offset":10612},"end":{"line":369,"column":88,"offset":10699},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, your state may contain several independent variables:","position":{"start":{"line":371,"column":1,"offset":10701},"end":{"line":371,"column":67,"offset":10767},"indent":[]}}],"position":{"start":{"line":371,"column":1,"offset":10701},"end":{"line":371,"column":67,"offset":10767},"indent":[]}},{"type":"html","lang":"jsx{4,5}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      posts<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      comments<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":373,"column":1,"offset":10769},"end":{"line":381,"column":4,"offset":10890},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Then you can update them independently with separate ","position":{"start":{"line":383,"column":1,"offset":10892},"end":{"line":383,"column":54,"offset":10945},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">setState()</code>","position":{"start":{"line":383,"column":54,"offset":10945},"end":{"line":383,"column":66,"offset":10957},"indent":[]}},{"type":"text","value":" calls:","position":{"start":{"line":383,"column":66,"offset":10957},"end":{"line":383,"column":73,"offset":10964},"indent":[]}}],"position":{"start":{"line":383,"column":1,"offset":10892},"end":{"line":383,"column":73,"offset":10964},"indent":[]}},{"type":"html","lang":"jsx{4,10}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\">  <span class=\"token function\">componentDidMount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        posts<span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>posts</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">fetchComments</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">response</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">        comments<span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>comments</span>      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":385,"column":1,"offset":10966},"end":{"line":399,"column":4,"offset":11231},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The merging is shallow, so ","position":{"start":{"line":401,"column":1,"offset":11233},"end":{"line":401,"column":28,"offset":11260},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.setState({comments})</code>","position":{"start":{"line":401,"column":28,"offset":11260},"end":{"line":401,"column":55,"offset":11287},"indent":[]}},{"type":"text","value":" leaves ","position":{"start":{"line":401,"column":55,"offset":11287},"end":{"line":401,"column":63,"offset":11295},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state.posts</code>","position":{"start":{"line":401,"column":63,"offset":11295},"end":{"line":401,"column":81,"offset":11313},"indent":[]}},{"type":"text","value":" intact, but completely replaces ","position":{"start":{"line":401,"column":81,"offset":11313},"end":{"line":401,"column":114,"offset":11346},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">this.state.comments</code>","position":{"start":{"line":401,"column":114,"offset":11346},"end":{"line":401,"column":135,"offset":11367},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":401,"column":135,"offset":11367},"end":{"line":401,"column":136,"offset":11368},"indent":[]}}],"position":{"start":{"line":401,"column":1,"offset":11233},"end":{"line":401,"column":136,"offset":11368},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#the-data-flows-down","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"The Data Flows Down ","position":{"start":{"line":403,"column":4,"offset":11373},"end":{"line":403,"column":46,"offset":11415},"indent":[]}}],"position":{"start":{"line":403,"column":1,"offset":11370},"end":{"line":403,"column":46,"offset":11415},"indent":[]},"data":{"id":"the-data-flows-down","htmlAttributes":{"id":"the-data-flows-down"},"hProperties":{"id":"the-data-flows-down"}}},{"type":"paragraph","children":[{"type":"text","value":"Neither parent nor child components can know if a certain component is stateful or stateless, and they shouldn’t care whether it is defined as a function or a class.","position":{"start":{"line":405,"column":1,"offset":11417},"end":{"line":405,"column":166,"offset":11582},"indent":[]}}],"position":{"start":{"line":405,"column":1,"offset":11417},"end":{"line":405,"column":166,"offset":11582},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is why state is often called local or encapsulated. It is not accessible to any component other than the one that owns and sets it.","position":{"start":{"line":407,"column":1,"offset":11584},"end":{"line":407,"column":137,"offset":11720},"indent":[]}}],"position":{"start":{"line":407,"column":1,"offset":11584},"end":{"line":407,"column":137,"offset":11720},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A component may choose to pass its state down as props to its child components:","position":{"start":{"line":409,"column":1,"offset":11722},"end":{"line":409,"column":80,"offset":11801},"indent":[]}}],"position":{"start":{"line":409,"column":1,"offset":11722},"end":{"line":409,"column":80,"offset":11801},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">FormattedDate</span></span> <span class=\"token attr-name\">date</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>state<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>","position":{"start":{"line":411,"column":1,"offset":11803},"end":{"line":413,"column":4,"offset":11853},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":415,"column":1,"offset":11855},"end":{"line":415,"column":5,"offset":11859},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">FormattedDate</code>","position":{"start":{"line":415,"column":5,"offset":11859},"end":{"line":415,"column":20,"offset":11874},"indent":[]}},{"type":"text","value":" component would receive the ","position":{"start":{"line":415,"column":20,"offset":11874},"end":{"line":415,"column":49,"offset":11903},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">date</code>","position":{"start":{"line":415,"column":49,"offset":11903},"end":{"line":415,"column":55,"offset":11909},"indent":[]}},{"type":"text","value":" in its props and wouldn’t know whether it came from the ","position":{"start":{"line":415,"column":55,"offset":11909},"end":{"line":415,"column":112,"offset":11966},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":415,"column":112,"offset":11966},"end":{"line":415,"column":119,"offset":11973},"indent":[]}},{"type":"text","value":"’s state, from the ","position":{"start":{"line":415,"column":119,"offset":11973},"end":{"line":415,"column":138,"offset":11992},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":415,"column":138,"offset":11992},"end":{"line":415,"column":145,"offset":11999},"indent":[]}},{"type":"text","value":"’s props, or was typed by hand:","position":{"start":{"line":415,"column":145,"offset":11999},"end":{"line":415,"column":176,"offset":12030},"indent":[]}}],"position":{"start":{"line":415,"column":1,"offset":11855},"end":{"line":415,"column":176,"offset":12030},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">FormattedDate</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">It is </span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>date<span class=\"token punctuation\">.</span><span class=\"token function\">toLocaleTimeString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">.</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":417,"column":1,"offset":12032},"end":{"line":421,"column":4,"offset":12135},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://codepen.io/gaearon/pen/zKRqNB?editors=0010","children":[{"type":"strong","children":[{"type":"text","value":"Try it on CodePen","position":{"start":{"line":423,"column":4,"offset":12140},"end":{"line":423,"column":21,"offset":12157},"indent":[]}}],"position":{"start":{"line":423,"column":2,"offset":12138},"end":{"line":423,"column":23,"offset":12159},"indent":[]}}],"position":{"start":{"line":423,"column":1,"offset":12137},"end":{"line":423,"column":76,"offset":12212},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":423,"column":1,"offset":12137},"end":{"line":423,"column":76,"offset":12212},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This is commonly called a “top-down” or “unidirectional” data flow. Any state is always owned by some specific component, and any data or UI derived from that state can only affect components “below” them in the tree.","position":{"start":{"line":425,"column":1,"offset":12214},"end":{"line":425,"column":218,"offset":12431},"indent":[]}}],"position":{"start":{"line":425,"column":1,"offset":12214},"end":{"line":425,"column":218,"offset":12431},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you imagine a component tree as a waterfall of props, each component’s state is like an additional water source that joins it at an arbitrary point but also flows down.","position":{"start":{"line":427,"column":1,"offset":12433},"end":{"line":427,"column":172,"offset":12604},"indent":[]}}],"position":{"start":{"line":427,"column":1,"offset":12433},"end":{"line":427,"column":172,"offset":12604},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To show that all components are truly isolated, we can create an ","position":{"start":{"line":429,"column":1,"offset":12606},"end":{"line":429,"column":66,"offset":12671},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">App</code>","position":{"start":{"line":429,"column":66,"offset":12671},"end":{"line":429,"column":71,"offset":12676},"indent":[]}},{"type":"text","value":" component that renders three ","position":{"start":{"line":429,"column":71,"offset":12676},"end":{"line":429,"column":101,"offset":12706},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">&lt;Clock&gt;</code>","position":{"start":{"line":429,"column":101,"offset":12706},"end":{"line":429,"column":110,"offset":12715},"indent":[]}},{"type":"text","value":"s:","position":{"start":{"line":429,"column":110,"offset":12715},"end":{"line":429,"column":112,"offset":12717},"indent":[]}}],"position":{"start":{"line":429,"column":1,"offset":12606},"end":{"line":429,"column":112,"offset":12717},"indent":[]}},{"type":"html","lang":"jsx{4-6}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\"></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token plain-text\">      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Clock</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\"></span></span><span class=\"token plain-text\">    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">,</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":431,"column":1,"offset":12719},"end":{"line":446,"column":4,"offset":12903},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://codepen.io/gaearon/pen/vXdGmd?editors=0010","children":[{"type":"strong","children":[{"type":"text","value":"Try it on CodePen","position":{"start":{"line":448,"column":4,"offset":12908},"end":{"line":448,"column":21,"offset":12925},"indent":[]}}],"position":{"start":{"line":448,"column":2,"offset":12906},"end":{"line":448,"column":23,"offset":12927},"indent":[]}}],"position":{"start":{"line":448,"column":1,"offset":12905},"end":{"line":448,"column":76,"offset":12980},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}}],"position":{"start":{"line":448,"column":1,"offset":12905},"end":{"line":448,"column":76,"offset":12980},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Each ","position":{"start":{"line":450,"column":1,"offset":12982},"end":{"line":450,"column":6,"offset":12987},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">Clock</code>","position":{"start":{"line":450,"column":6,"offset":12987},"end":{"line":450,"column":13,"offset":12994},"indent":[]}},{"type":"text","value":" sets up its own timer and updates independently.","position":{"start":{"line":450,"column":13,"offset":12994},"end":{"line":450,"column":62,"offset":13043},"indent":[]}}],"position":{"start":{"line":450,"column":1,"offset":12982},"end":{"line":450,"column":62,"offset":13043},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In React apps, whether a component is stateful or stateless is considered an implementation detail of the component that may change over time. You can use stateless components inside stateful components, and vice versa.","position":{"start":{"line":452,"column":1,"offset":13045},"end":{"line":452,"column":220,"offset":13264},"indent":[]}}],"position":{"start":{"line":452,"column":1,"offset":13045},"end":{"line":452,"column":220,"offset":13264},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":453,"column":1,"offset":13265}}}}