{"expireTime":9007200851888146000,"key":"transformer-remark-markdown-ast-5d4eb18e87ec452f740ff359f9998909-gatsby-remark-responsive-iframegatsby-remark-imagesgatsby-remark-external-linksgatsby-remark-header-custom-idsgatsby-remark-code-replsgatsby-remark-embed-snippetgatsby-remark-use-jsxgatsby-remark-prismjsgatsby-remark-copy-linked-filesgatsby-remark-smartypants-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":" You are probably here because you got the following error message:","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":68,"offset":68},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":68,"offset":68},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Hooks can only be called inside the body of a function component.","position":{"start":{"line":4,"column":4,"offset":73},"end":{"line":4,"column":69,"offset":138},"indent":[]}}],"position":{"start":{"line":4,"column":4,"offset":73},"end":{"line":4,"column":69,"offset":138},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":70},"end":{"line":4,"column":69,"offset":138},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"There are three common reasons you might be seeing it:","position":{"start":{"line":6,"column":1,"offset":140},"end":{"line":6,"column":55,"offset":194},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":140},"end":{"line":6,"column":55,"offset":194},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"You might have ","position":{"start":{"line":8,"column":4,"offset":199},"end":{"line":8,"column":19,"offset":214},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"mismatching versions","position":{"start":{"line":8,"column":21,"offset":216},"end":{"line":8,"column":41,"offset":236},"indent":[]}}],"position":{"start":{"line":8,"column":19,"offset":214},"end":{"line":8,"column":43,"offset":238},"indent":[]}},{"type":"text","value":" of React and React DOM.","position":{"start":{"line":8,"column":43,"offset":238},"end":{"line":8,"column":67,"offset":262},"indent":[]}}],"position":{"start":{"line":8,"column":4,"offset":199},"end":{"line":8,"column":67,"offset":262},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":196},"end":{"line":8,"column":67,"offset":262},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"You might be ","position":{"start":{"line":9,"column":4,"offset":266},"end":{"line":9,"column":17,"offset":279},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"breaking the ","position":{"start":{"line":9,"column":19,"offset":281},"end":{"line":9,"column":32,"offset":294},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-rules.html","children":[{"type":"text","value":"Rules of Hooks","position":{"start":{"line":9,"column":33,"offset":295},"end":{"line":9,"column":47,"offset":309},"indent":[]}}],"position":{"start":{"line":9,"column":32,"offset":294},"end":{"line":9,"column":72,"offset":334},"indent":[]}}],"position":{"start":{"line":9,"column":17,"offset":279},"end":{"line":9,"column":74,"offset":336},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":9,"column":74,"offset":336},"end":{"line":9,"column":75,"offset":337},"indent":[]}}],"position":{"start":{"line":9,"column":4,"offset":266},"end":{"line":9,"column":75,"offset":337},"indent":[]}}],"position":{"start":{"line":9,"column":1,"offset":263},"end":{"line":9,"column":75,"offset":337},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"You might have ","position":{"start":{"line":10,"column":4,"offset":341},"end":{"line":10,"column":19,"offset":356},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"more than one copy of React","position":{"start":{"line":10,"column":21,"offset":358},"end":{"line":10,"column":48,"offset":385},"indent":[]}}],"position":{"start":{"line":10,"column":19,"offset":356},"end":{"line":10,"column":50,"offset":387},"indent":[]}},{"type":"text","value":" in the same app.","position":{"start":{"line":10,"column":50,"offset":387},"end":{"line":10,"column":67,"offset":404},"indent":[]}}],"position":{"start":{"line":10,"column":4,"offset":341},"end":{"line":10,"column":67,"offset":404},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":338},"end":{"line":10,"column":67,"offset":404},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":196},"end":{"line":10,"column":67,"offset":404},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Let’s look at each of these cases.","position":{"start":{"line":12,"column":1,"offset":406},"end":{"line":12,"column":35,"offset":440},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":406},"end":{"line":12,"column":35,"offset":440},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#mismatching-versions-of-react-and-react-dom","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Mismatching Versions of React and React DOM ","position":{"start":{"line":14,"column":4,"offset":445},"end":{"line":14,"column":94,"offset":535},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":442},"end":{"line":14,"column":94,"offset":535},"indent":[]},"data":{"id":"mismatching-versions-of-react-and-react-dom","htmlAttributes":{"id":"mismatching-versions-of-react-and-react-dom"},"hProperties":{"id":"mismatching-versions-of-react-and-react-dom"}}},{"type":"paragraph","children":[{"type":"text","value":"You might be using a version of ","position":{"start":{"line":16,"column":1,"offset":537},"end":{"line":16,"column":33,"offset":569},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react-dom</code>","position":{"start":{"line":16,"column":33,"offset":569},"end":{"line":16,"column":44,"offset":580},"indent":[]}},{"type":"text","value":" (< 16.8.0) or ","position":{"start":{"line":16,"column":44,"offset":580},"end":{"line":16,"column":59,"offset":595},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react-native</code>","position":{"start":{"line":16,"column":59,"offset":595},"end":{"line":16,"column":73,"offset":609},"indent":[]}},{"type":"text","value":" (< 0.59) that doesn’t yet support Hooks. You can run ","position":{"start":{"line":16,"column":73,"offset":609},"end":{"line":16,"column":127,"offset":663},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">npm ls react-dom</code>","position":{"start":{"line":16,"column":127,"offset":663},"end":{"line":16,"column":145,"offset":681},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":16,"column":145,"offset":681},"end":{"line":16,"column":149,"offset":685},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">npm ls react-native</code>","position":{"start":{"line":16,"column":149,"offset":685},"end":{"line":16,"column":170,"offset":706},"indent":[]}},{"type":"text","value":" in your application folder to check which version you’re using. If you find more than one of them, this might also create problems (more on that below).","position":{"start":{"line":16,"column":170,"offset":706},"end":{"line":16,"column":323,"offset":859},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":537},"end":{"line":16,"column":323,"offset":859},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#breaking-the-rules-of-hooks","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Breaking the Rules of Hooks ","position":{"start":{"line":18,"column":4,"offset":864},"end":{"line":18,"column":62,"offset":922},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":861},"end":{"line":18,"column":62,"offset":922},"indent":[]},"data":{"id":"breaking-the-rules-of-hooks","htmlAttributes":{"id":"breaking-the-rules-of-hooks"},"hProperties":{"id":"breaking-the-rules-of-hooks"}}},{"type":"paragraph","children":[{"type":"text","value":"You can only call Hooks ","position":{"start":{"line":20,"column":1,"offset":924},"end":{"line":20,"column":25,"offset":948},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"while React is rendering a function component","position":{"start":{"line":20,"column":27,"offset":950},"end":{"line":20,"column":72,"offset":995},"indent":[]}}],"position":{"start":{"line":20,"column":25,"offset":948},"end":{"line":20,"column":74,"offset":997},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":20,"column":74,"offset":997},"end":{"line":20,"column":75,"offset":998},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":924},"end":{"line":20,"column":75,"offset":998},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"✅ Call them at the top level in the body of a function component.","position":{"start":{"line":22,"column":3,"offset":1002},"end":{"line":22,"column":68,"offset":1067},"indent":[]}}],"position":{"start":{"line":22,"column":3,"offset":1002},"end":{"line":22,"column":68,"offset":1067},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1000},"end":{"line":22,"column":68,"offset":1067},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"✅ Call them at the top level in the body of a ","position":{"start":{"line":23,"column":3,"offset":1070},"end":{"line":23,"column":49,"offset":1116},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-custom.html","children":[{"type":"text","value":"custom Hook","position":{"start":{"line":23,"column":50,"offset":1117},"end":{"line":23,"column":61,"offset":1128},"indent":[]}}],"position":{"start":{"line":23,"column":49,"offset":1116},"end":{"line":23,"column":87,"offset":1154},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":23,"column":87,"offset":1154},"end":{"line":23,"column":88,"offset":1155},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":1070},"end":{"line":23,"column":88,"offset":1155},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1068},"end":{"line":23,"column":88,"offset":1155},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1000},"end":{"line":23,"column":88,"offset":1155},"indent":[1]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Learn more about this in the ","position":{"start":{"line":25,"column":3,"offset":1159},"end":{"line":25,"column":32,"offset":1188},"indent":[]}},{"type":"link","title":null,"url":"/docs/hooks-rules.html","children":[{"type":"text","value":"Rules of Hooks","position":{"start":{"line":25,"column":33,"offset":1189},"end":{"line":25,"column":47,"offset":1203},"indent":[]}}],"position":{"start":{"line":25,"column":32,"offset":1188},"end":{"line":25,"column":72,"offset":1228},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":25,"column":72,"offset":1228},"end":{"line":25,"column":73,"offset":1229},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1157},"end":{"line":25,"column":75,"offset":1231},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1157},"end":{"line":25,"column":75,"offset":1231},"indent":[]}},{"type":"html","lang":"jsx{2-3,8-9}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Counter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ✅ Good: top-level in a function component</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>count<span class=\"token punctuation\">,</span> setCount<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">useWindowWidth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token comment\">// ✅ Good: top-level in a custom Hook</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>width<span class=\"token punctuation\">,</span> setWidth<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>innerWidth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":27,"column":1,"offset":1233},"end":{"line":39,"column":4,"offset":1508},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"To avoid confusion, it’s ","position":{"start":{"line":41,"column":1,"offset":1510},"end":{"line":41,"column":26,"offset":1535},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"not","position":{"start":{"line":41,"column":28,"offset":1537},"end":{"line":41,"column":31,"offset":1540},"indent":[]}}],"position":{"start":{"line":41,"column":26,"offset":1535},"end":{"line":41,"column":33,"offset":1542},"indent":[]}},{"type":"text","value":" supported to call Hooks in other cases:","position":{"start":{"line":41,"column":33,"offset":1542},"end":{"line":41,"column":73,"offset":1582},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1510},"end":{"line":41,"column":73,"offset":1582},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"🔴 Do not call Hooks in class components.","position":{"start":{"line":43,"column":3,"offset":1586},"end":{"line":43,"column":44,"offset":1627},"indent":[]}}],"position":{"start":{"line":43,"column":3,"offset":1586},"end":{"line":43,"column":44,"offset":1627},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":1584},"end":{"line":43,"column":44,"offset":1627},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"🔴 Do not call in event handlers.","position":{"start":{"line":44,"column":3,"offset":1630},"end":{"line":44,"column":36,"offset":1663},"indent":[]}}],"position":{"start":{"line":44,"column":3,"offset":1630},"end":{"line":44,"column":36,"offset":1663},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":1628},"end":{"line":44,"column":36,"offset":1663},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"🔴 Do not call Hooks inside functions passed to ","position":{"start":{"line":45,"column":3,"offset":1666},"end":{"line":45,"column":51,"offset":1714},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useMemo</code>","position":{"start":{"line":45,"column":51,"offset":1714},"end":{"line":45,"column":60,"offset":1723},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":45,"column":60,"offset":1723},"end":{"line":45,"column":62,"offset":1725},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useReducer</code>","position":{"start":{"line":45,"column":62,"offset":1725},"end":{"line":45,"column":74,"offset":1737},"indent":[]}},{"type":"text","value":", or ","position":{"start":{"line":45,"column":74,"offset":1737},"end":{"line":45,"column":79,"offset":1742},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">useEffect</code>","position":{"start":{"line":45,"column":79,"offset":1742},"end":{"line":45,"column":90,"offset":1753},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":45,"column":90,"offset":1753},"end":{"line":45,"column":91,"offset":1754},"indent":[]}}],"position":{"start":{"line":45,"column":3,"offset":1666},"end":{"line":45,"column":91,"offset":1754},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":1664},"end":{"line":45,"column":91,"offset":1754},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":1584},"end":{"line":45,"column":91,"offset":1754},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you break these rules, you might see this error.","position":{"start":{"line":47,"column":1,"offset":1756},"end":{"line":47,"column":52,"offset":1807},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":1756},"end":{"line":47,"column":52,"offset":1807},"indent":[]}},{"type":"html","lang":"jsx{3-4,11-12,20-21}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">Bad1</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">function</span> <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 🔴 Bad: inside an event handler (to fix, move it outside!)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ThemeContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Bad2</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> style <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 🔴 Bad: inside useMemo (to fix, move it outside!)</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ThemeContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>    <span class=\"token keyword\">return</span> <span class=\"token function\">createStyle</span><span class=\"token punctuation\">(</span>theme<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Bad3</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token comment\">// 🔴 Bad: inside a class component</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span>    <span class=\"token comment\">// ...</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","position":{"start":{"line":49,"column":1,"offset":1809},"end":{"line":74,"column":4,"offset":2337},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can use the ","position":{"start":{"line":76,"column":1,"offset":2339},"end":{"line":76,"column":17,"offset":2355},"indent":[]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/eslint-plugin-react-hooks","children":[{"type":"html","value":"<code class=\"gatsby-code-text\">eslint-plugin-react-hooks</code>","position":{"start":{"line":76,"column":18,"offset":2356},"end":{"line":76,"column":45,"offset":2383},"indent":[]}},{"type":"text","value":" plugin","position":{"start":{"line":76,"column":45,"offset":2383},"end":{"line":76,"column":52,"offset":2390},"indent":[]}}],"position":{"start":{"line":76,"column":17,"offset":2355},"end":{"line":76,"column":110,"offset":2448},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" to catch some of these mistakes.","position":{"start":{"line":76,"column":110,"offset":2448},"end":{"line":76,"column":143,"offset":2481},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2339},"end":{"line":76,"column":143,"offset":2481},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Note","position":{"start":{"line":78,"column":2,"offset":2484},"end":{"line":78,"column":6,"offset":2488},"indent":[]}}],"position":{"start":{"line":78,"column":2,"offset":2484},"end":{"line":78,"column":6,"offset":2488},"indent":[]}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"/docs/hooks-custom.html","children":[{"type":"text","value":"Custom Hooks","position":{"start":{"line":80,"column":3,"offset":2493},"end":{"line":80,"column":15,"offset":2505},"indent":[]}}],"position":{"start":{"line":80,"column":2,"offset":2492},"end":{"line":80,"column":41,"offset":2531},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":80,"column":41,"offset":2531},"end":{"line":80,"column":42,"offset":2532},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"may","position":{"start":{"line":80,"column":43,"offset":2533},"end":{"line":80,"column":46,"offset":2536},"indent":[]}}],"position":{"start":{"line":80,"column":42,"offset":2532},"end":{"line":80,"column":47,"offset":2537},"indent":[]}},{"type":"text","value":" call other Hooks (that’s their whole purpose). This works because custom Hooks are also supposed to only be called while a function component is rendering.","position":{"start":{"line":80,"column":47,"offset":2537},"end":{"line":80,"column":203,"offset":2693},"indent":[]}}],"position":{"start":{"line":80,"column":2,"offset":2492},"end":{"line":80,"column":203,"offset":2693},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":2483},"end":{"line":80,"column":203,"offset":2693},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#duplicate-react","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Duplicate React ","position":{"start":{"line":83,"column":4,"offset":2699},"end":{"line":83,"column":38,"offset":2733},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":2696},"end":{"line":83,"column":38,"offset":2733},"indent":[]},"data":{"id":"duplicate-react","htmlAttributes":{"id":"duplicate-react"},"hProperties":{"id":"duplicate-react"}}},{"type":"paragraph","children":[{"type":"text","value":"In order for Hooks to work, the ","position":{"start":{"line":85,"column":1,"offset":2735},"end":{"line":85,"column":33,"offset":2767},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react</code>","position":{"start":{"line":85,"column":33,"offset":2767},"end":{"line":85,"column":40,"offset":2774},"indent":[]}},{"type":"text","value":" import from your application code needs to resolve to the same module as the ","position":{"start":{"line":85,"column":40,"offset":2774},"end":{"line":85,"column":118,"offset":2852},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react</code>","position":{"start":{"line":85,"column":118,"offset":2852},"end":{"line":85,"column":125,"offset":2859},"indent":[]}},{"type":"text","value":" import from inside the ","position":{"start":{"line":85,"column":125,"offset":2859},"end":{"line":85,"column":149,"offset":2883},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react-dom</code>","position":{"start":{"line":85,"column":149,"offset":2883},"end":{"line":85,"column":160,"offset":2894},"indent":[]}},{"type":"text","value":" package.","position":{"start":{"line":85,"column":160,"offset":2894},"end":{"line":85,"column":169,"offset":2903},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":2735},"end":{"line":85,"column":169,"offset":2903},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If these ","position":{"start":{"line":87,"column":1,"offset":2905},"end":{"line":87,"column":10,"offset":2914},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react</code>","position":{"start":{"line":87,"column":10,"offset":2914},"end":{"line":87,"column":17,"offset":2921},"indent":[]}},{"type":"text","value":" imports resolve to two different exports objects, you will see this warning. This may happen if you ","position":{"start":{"line":87,"column":17,"offset":2921},"end":{"line":87,"column":118,"offset":3022},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"accidentally end up with two copies","position":{"start":{"line":87,"column":120,"offset":3024},"end":{"line":87,"column":155,"offset":3059},"indent":[]}}],"position":{"start":{"line":87,"column":118,"offset":3022},"end":{"line":87,"column":157,"offset":3061},"indent":[]}},{"type":"text","value":" of the ","position":{"start":{"line":87,"column":157,"offset":3061},"end":{"line":87,"column":165,"offset":3069},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react</code>","position":{"start":{"line":87,"column":165,"offset":3069},"end":{"line":87,"column":172,"offset":3076},"indent":[]}},{"type":"text","value":" package.","position":{"start":{"line":87,"column":172,"offset":3076},"end":{"line":87,"column":181,"offset":3085},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":2905},"end":{"line":87,"column":181,"offset":3085},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you use Node for package management, you can run this check in your project folder:","position":{"start":{"line":89,"column":1,"offset":3087},"end":{"line":89,"column":87,"offset":3173},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":3087},"end":{"line":89,"column":87,"offset":3173},"indent":[]}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">npm ls react</code></pre></div>","position":{"start":{"line":91,"column":1,"offset":3175},"end":{"line":91,"column":17,"offset":3191},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you see more than one React, you’ll need to figure out why this happens and fix your dependency tree. For example, maybe a library you’re using incorrectly specifies ","position":{"start":{"line":93,"column":1,"offset":3193},"end":{"line":93,"column":170,"offset":3362},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react</code>","position":{"start":{"line":93,"column":170,"offset":3362},"end":{"line":93,"column":177,"offset":3369},"indent":[]}},{"type":"text","value":" as a dependency (rather than a peer dependency). Until that library is fixed, ","position":{"start":{"line":93,"column":177,"offset":3369},"end":{"line":93,"column":256,"offset":3448},"indent":[]}},{"type":"link","title":null,"url":"https://yarnpkg.com/lang/en/docs/selective-version-resolutions/","children":[{"type":"text","value":"Yarn resolutions","position":{"start":{"line":93,"column":257,"offset":3449},"end":{"line":93,"column":273,"offset":3465},"indent":[]}}],"position":{"start":{"line":93,"column":256,"offset":3448},"end":{"line":93,"column":339,"offset":3531},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" is one possible workaround.","position":{"start":{"line":93,"column":339,"offset":3531},"end":{"line":93,"column":367,"offset":3559},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":3193},"end":{"line":93,"column":367,"offset":3559},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can also try to debug this problem by adding some logs and restarting your development server:","position":{"start":{"line":95,"column":1,"offset":3561},"end":{"line":95,"column":99,"offset":3659},"indent":[]}}],"position":{"start":{"line":95,"column":1,"offset":3561},"end":{"line":95,"column":99,"offset":3659},"indent":[]}},{"type":"html","lang":"jsx","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token comment\">// Add this in node_modules/react-dom/index.js</span>\nwindow<span class=\"token punctuation\">.</span>React1 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Add this in your component file</span>\n<span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nwindow<span class=\"token punctuation\">.</span>React2 <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>window<span class=\"token punctuation\">.</span>React1 <span class=\"token operator\">===</span> window<span class=\"token punctuation\">.</span>React2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","position":{"start":{"line":97,"column":1,"offset":3661},"end":{"line":105,"column":4,"offset":3889},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If it prints ","position":{"start":{"line":107,"column":1,"offset":3891},"end":{"line":107,"column":14,"offset":3904},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">false</code>","position":{"start":{"line":107,"column":14,"offset":3904},"end":{"line":107,"column":21,"offset":3911},"indent":[]}},{"type":"text","value":" then you might have two Reacts and need to figure out why that happened. ","position":{"start":{"line":107,"column":21,"offset":3911},"end":{"line":107,"column":95,"offset":3985},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/facebook/react/issues/13991","children":[{"type":"text","value":"This issue","position":{"start":{"line":107,"column":96,"offset":3986},"end":{"line":107,"column":106,"offset":3996},"indent":[]}}],"position":{"start":{"line":107,"column":95,"offset":3985},"end":{"line":107,"column":155,"offset":4045},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" includes some common reasons encountered by the community.","position":{"start":{"line":107,"column":155,"offset":4045},"end":{"line":107,"column":214,"offset":4104},"indent":[]}}],"position":{"start":{"line":107,"column":1,"offset":3891},"end":{"line":107,"column":214,"offset":4104},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This problem can also come up when you use ","position":{"start":{"line":109,"column":1,"offset":4106},"end":{"line":109,"column":44,"offset":4149},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">npm link</code>","position":{"start":{"line":109,"column":44,"offset":4149},"end":{"line":109,"column":54,"offset":4159},"indent":[]}},{"type":"text","value":" or an equivalent. In that case, your bundler might “see” two Reacts — one in application folder and one in your library folder. Assuming ","position":{"start":{"line":109,"column":54,"offset":4159},"end":{"line":109,"column":192,"offset":4297},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">myapp</code>","position":{"start":{"line":109,"column":192,"offset":4297},"end":{"line":109,"column":199,"offset":4304},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":109,"column":199,"offset":4304},"end":{"line":109,"column":204,"offset":4309},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">mylib</code>","position":{"start":{"line":109,"column":204,"offset":4309},"end":{"line":109,"column":211,"offset":4316},"indent":[]}},{"type":"text","value":" are sibling folders, one possible fix is to run ","position":{"start":{"line":109,"column":211,"offset":4316},"end":{"line":109,"column":260,"offset":4365},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">npm link ../myapp/node_modules/react</code>","position":{"start":{"line":109,"column":260,"offset":4365},"end":{"line":109,"column":298,"offset":4403},"indent":[]}},{"type":"text","value":" from ","position":{"start":{"line":109,"column":298,"offset":4403},"end":{"line":109,"column":304,"offset":4409},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">mylib</code>","position":{"start":{"line":109,"column":304,"offset":4409},"end":{"line":109,"column":311,"offset":4416},"indent":[]}},{"type":"text","value":". This should make the library use the application’s React copy.","position":{"start":{"line":109,"column":311,"offset":4416},"end":{"line":109,"column":375,"offset":4480},"indent":[]}}],"position":{"start":{"line":109,"column":1,"offset":4106},"end":{"line":109,"column":375,"offset":4480},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Note","position":{"start":{"line":111,"column":2,"offset":4483},"end":{"line":111,"column":6,"offset":4487},"indent":[]}}],"position":{"start":{"line":111,"column":2,"offset":4483},"end":{"line":111,"column":6,"offset":4487},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In general, React supports using multiple independent copies on one page (for example, if an app and a third-party widget both use it). It only breaks if ","position":{"start":{"line":113,"column":2,"offset":4491},"end":{"line":113,"column":156,"offset":4645},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">require(&#39;react&#39;)</code>","position":{"start":{"line":113,"column":156,"offset":4645},"end":{"line":113,"column":174,"offset":4663},"indent":[]}},{"type":"text","value":" resolves differently between the component and the ","position":{"start":{"line":113,"column":174,"offset":4663},"end":{"line":113,"column":226,"offset":4715},"indent":[]}},{"type":"html","value":"<code class=\"gatsby-code-text\">react-dom</code>","position":{"start":{"line":113,"column":226,"offset":4715},"end":{"line":113,"column":237,"offset":4726},"indent":[]}},{"type":"text","value":" copy it was rendered with.","position":{"start":{"line":113,"column":237,"offset":4726},"end":{"line":113,"column":264,"offset":4753},"indent":[]}}],"position":{"start":{"line":113,"column":2,"offset":4491},"end":{"line":113,"column":264,"offset":4753},"indent":[]}}],"position":{"start":{"line":111,"column":1,"offset":4482},"end":{"line":113,"column":264,"offset":4753},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#other-causes","title":null,"data":{"hProperties":{"aria-hidden":true,"class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Other Causes ","position":{"start":{"line":115,"column":4,"offset":4758},"end":{"line":115,"column":32,"offset":4786},"indent":[]}}],"position":{"start":{"line":115,"column":1,"offset":4755},"end":{"line":115,"column":32,"offset":4786},"indent":[]},"data":{"id":"other-causes","htmlAttributes":{"id":"other-causes"},"hProperties":{"id":"other-causes"}}},{"type":"paragraph","children":[{"type":"text","value":"If none of this worked, please comment in ","position":{"start":{"line":117,"column":1,"offset":4788},"end":{"line":117,"column":43,"offset":4830},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/facebook/react/issues/13991","children":[{"type":"text","value":"this issue","position":{"start":{"line":117,"column":44,"offset":4831},"end":{"line":117,"column":54,"offset":4841},"indent":[]}}],"position":{"start":{"line":117,"column":43,"offset":4830},"end":{"line":117,"column":103,"offset":4890},"indent":[]},"data":{"hProperties":{"target":"_blank","rel":"nofollow noopener noreferrer"}}},{"type":"text","value":" and we’ll try to help. Try to create a small reproducing example — you might discover the problem as you’re doing it.","position":{"start":{"line":117,"column":103,"offset":4890},"end":{"line":117,"column":221,"offset":5008},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":4788},"end":{"line":117,"column":221,"offset":5008},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":118,"column":1,"offset":5009}}}}