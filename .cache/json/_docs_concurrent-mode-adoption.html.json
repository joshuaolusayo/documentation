{"data":{"markdownRemark":{"html":"<style>\n.scary > blockquote {\n  background-color: rgba(237, 51, 21, 0.2);\n  border-left-color: #ed3315;\n}\n</style>\n<div class=\"scary\">\n<blockquote>\n<p>Caution:</p>\n<p>This page describes <strong>experimental features that are not yet available in a stable release</strong>. Don’t rely on experimental builds of React in production apps. These features may change significantly and without a warning before they become a part of React.</p>\n<p>This documentation is aimed at early adopters and people who are curious. <strong>If you’re new to React, don’t worry about these features</strong> — you don’t need to learn them right now.</p>\n</blockquote>\n</div>\n<ul>\n<li>\n<p><a href=\"#installation\">Installation</a></p>\n<ul>\n<li><a href=\"#who-is-this-experimental-release-for\">Who Is This Experimental Release For?</a></li>\n<li><a href=\"#enabling-concurrent-mode\">Enabling Concurrent Mode</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#what-to-expect\">What to Expect</a></p>\n<ul>\n<li><a href=\"#migration-step-blocking-mode\">Migration Step: Blocking Mode</a></li>\n<li><a href=\"#why-so-many-modes\">Why So Many Modes?</a></li>\n<li><a href=\"#feature-comparison\">Feature Comparison</a></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"installation\"><a href=\"#installation\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Installation </h2>\n<p>Concurrent Mode is only available in the <a href=\"/blog/2019/10/22/react-release-channels.html#experimental-channel\">experimental builds</a> of React. To install them, run:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"gatsby-code-text\"><code class=\"gatsby-code-text\">npm install react@experimental react-dom@experimental</code></pre></div>\n<p><strong>There are no semantic versioning guarantees for the experimental builds.</strong><br>\nAPIs may be added, changed, or removed with any <code class=\"gatsby-code-text\">@experimental</code> release.</p>\n<p><strong>Experimental releases will have frequent breaking changes.</strong></p>\n<p>You can try these builds on personal projects or in a branch, but we don’t recommend running them in production. At Facebook, we <em>do</em> run them in production, but that’s because we’re also there to fix bugs when something breaks. You’ve been warned!</p>\n<h3 id=\"who-is-this-experimental-release-for\"><a href=\"#who-is-this-experimental-release-for\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Who Is This Experimental Release For? </h3>\n<p>This release is primarily aimed at early adopters, library authors, and curious people.</p>\n<p>We’re using this code in production (and it works for us) but there are still some bugs, missing features, and gaps in the documentation. We’d like to hear more about what breaks in Concurrent Mode so we can better prepare it for an official stable release in the future.</p>\n<h3 id=\"enabling-concurrent-mode\"><a href=\"#enabling-concurrent-mode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Enabling Concurrent Mode </h3>\n<p>Normally, when we add features to React, you can start using them immediately. Fragments, Context, and even Hooks are examples of such features. You can use them in new code without making any changes to the existing code.</p>\n<p>Concurrent Mode is different. It introduces semantic changes to how React works. Otherwise, the <a href=\"/docs/concurrent-mode-patterns.html\">new features</a> enabled by it <em>wouldn’t be possible</em>. This is why they’re grouped into a new “mode” rather than released one by one in isolation.</p>\n<p>You can’t opt into Concurrent Mode on a per-subtree basis. Instead, to opt in, you have to do it in the place where today you call <code class=\"gatsby-code-text\">ReactDOM.render()</code>.</p>\n<p><strong>This will enable Concurrent Mode for the whole <code class=\"gatsby-code-text\">&lt;App /&gt;</code> tree:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// If you previously had:</span>\n<span class=\"token comment\">//</span>\n<span class=\"token comment\">// ReactDOM.render(&lt;App />, document.getElementById('root'));</span>\n<span class=\"token comment\">//</span>\n<span class=\"token comment\">// You can opt into Concurrent Mode by writing:</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<blockquote>\n<p>Note:</p>\n<p>Concurrent Mode APIs such as <code class=\"gatsby-code-text\">createRoot</code> only exist in the experimental builds of React.</p>\n</blockquote>\n<p>In Concurrent Mode, the lifecycle methods <a href=\"/blog/2018/03/27/update-on-async-rendering.html\">previously marked</a> as “unsafe” actually <em>are</em> unsafe, and lead to bugs even more than in today’s React. We don’t recommend trying Concurrent Mode until your app is <a href=\"/docs/strict-mode.html\">Strict Mode</a>-compatible.</p>\n<h2 id=\"what-to-expect\"><a href=\"#what-to-expect\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What to Expect </h2>\n<p>If you have a large existing app, or if your app depends on a lot of third-party packages, please don’t expect that you can use the Concurrent Mode immediately. <strong>For example, at Facebook we are using Concurrent Mode for the new website, but we’re not planning to enable it on the old website.</strong> This is because our old website still uses unsafe lifecycle methods in the product code, incompatible third-party libraries, and patterns that don’t work well with the Concurrent Mode.</p>\n<p>In our experience, code that uses idiomatic React patterns and doesn’t rely on external state management solutions is the easiest to get running in the Concurrent Mode. We will describe common problems we’ve seen and the solutions to them separately in the coming weeks.</p>\n<h3 id=\"migration-step-blocking-mode\"><a href=\"#migration-step-blocking-mode\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Migration Step: Blocking Mode </h3>\n<p>For older codebases, Concurrent Mode might be a step too far. This is why we also provide a new “Blocking Mode” in the experimental React builds. You can try it by substituting <code class=\"gatsby-code-text\">createRoot</code> with <code class=\"gatsby-code-text\">createBlockingRoot</code>. It only offers a <em>small subset</em> of the Concurrent Mode features, but it is closer to how React works today and can serve as a migration step.</p>\n<p>To recap:</p>\n<ul>\n<li><strong>Legacy Mode:</strong> <code class=\"gatsby-code-text\">ReactDOM.render(&lt;App /&gt;, rootNode)</code>. This is what React apps use today. There are no plans to remove the legacy mode in the observable future — but it won’t be able to support these new features.</li>\n<li><strong>Blocking Mode:</strong> <code class=\"gatsby-code-text\">ReactDOM.createBlockingRoot(rootNode).render(&lt;App /&gt;)</code>. It is currently experimental. It is intended as a first migration step for apps that want to get a subset of Concurrent Mode features.</li>\n<li><strong>Concurrent Mode:</strong> <code class=\"gatsby-code-text\">ReactDOM.createRoot(rootNode).render(&lt;App /&gt;)</code>. It is currently experimental. In the future, after it stabilizes, we intend to make it the default React mode. This mode enables <em>all</em> the new features.</li>\n</ul>\n<h3 id=\"why-so-many-modes\"><a href=\"#why-so-many-modes\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Why So Many Modes? </h3>\n<p>We think it is better to offer a <a href=\"/docs/faq-versioning.html#commitment-to-stability\">gradual migration strategy</a> than to make huge breaking changes — or to let React stagnate into irrelevance.</p>\n<p>In practice, we expect that most apps using Legacy Mode today should be able to migrate at least to the Blocking Mode (if not Concurrent Mode). This fragmentation can be annoying for libraries that aim to support all Modes in the short term. However, gradually moving the ecosystem away from the Legacy Mode will also <em>solve</em> problems that affect major libraries in the React ecosystem, such as <a href=\"https://github.com/facebook/react/issues/14536\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">confusing Suspense behavior when reading layout</a> and <a href=\"https://github.com/facebook/react/issues/15080\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">lack of consistent batching guarantees</a>. There’s a number of bugs that can’t be fixed in Legacy Mode without changing semantics, but don’t exist in Blocking and Concurrent Modes.</p>\n<p>You can think of the Blocking Mode as a “gracefully degraded” version of the Concurrent Mode. <strong>As a result, in longer term we should be able to converge and stop thinking about different Modes altogether.</strong> But for now, Modes are an important migration strategy. They let everyone decide when a migration is worth it, and upgrade at their own pace.</p>\n<h3 id=\"feature-comparison\"><a href=\"#feature-comparison\" aria-hidden class=\"anchor\"><svg aria-hidden=\"true\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Feature Comparison </h3>\n<style>\n  #feature-table table { border-collapse: collapse; }\n  #feature-table th { padding-right: 30px; }\n  #feature-table tr { border-bottom: 1px solid #eee; }\n</style>\n<div id=\"feature-table\">\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Legacy Mode</th>\n<th>Blocking Mode</th>\n<th>Concurrent Mode</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><a href=\"/docs/refs-and-the-dom.html#legacy-api-string-refs\">String Refs</a></td>\n<td>✅</td>\n<td>🚫**</td>\n<td>🚫**</td>\n</tr>\n<tr>\n<td><a href=\"/docs/legacy-context.html\">Legacy Context</a></td>\n<td>✅</td>\n<td>🚫**</td>\n<td>🚫**</td>\n</tr>\n<tr>\n<td><a href=\"/docs/strict-mode.html#warning-about-deprecated-finddomnode-usage\">findDOMNode</a></td>\n<td>✅</td>\n<td>🚫**</td>\n<td>🚫**</td>\n</tr>\n<tr>\n<td><a href=\"/docs/concurrent-mode-suspense.html#what-is-suspense-exactly\">Suspense</a></td>\n<td>✅</td>\n<td>✅</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><a href=\"/docs/concurrent-mode-patterns.html#suspenselist\">SuspenseList</a></td>\n<td>🚫</td>\n<td>✅</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Suspense SSR + Hydration</td>\n<td>🚫</td>\n<td>✅</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Progressive Hydration</td>\n<td>🚫</td>\n<td>✅</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Selective Hydration</td>\n<td>🚫</td>\n<td>🚫</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Cooperative Multitasking</td>\n<td>🚫</td>\n<td>🚫</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Automatic batching of multiple setStates     </td>\n<td>🚫*</td>\n<td>✅</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><a href=\"/docs/concurrent-mode-patterns.html#splitting-high-and-low-priority-state\">Priority-based Rendering</a></td>\n<td>🚫</td>\n<td>🚫</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><a href=\"/docs/concurrent-mode-intro.html#interruptible-rendering\">Interruptible Prerendering</a></td>\n<td>🚫</td>\n<td>🚫</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><a href=\"/docs/concurrent-mode-patterns.html#transitions\">useTransition</a></td>\n<td>🚫</td>\n<td>🚫</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><a href=\"/docs/concurrent-mode-patterns.html#deferring-a-value\">useDeferredValue</a></td>\n<td>🚫</td>\n<td>🚫</td>\n<td>✅</td>\n</tr>\n<tr>\n<td><a href=\"/docs/concurrent-mode-patterns.html#suspense-reveal-train\">Suspense Reveal “Train”</a></td>\n<td>🚫</td>\n<td>🚫</td>\n<td>✅</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>*: Legacy mode has automatic batching in React-managed events but it’s limited to one browser task. Non-React events must opt-in using <code class=\"gatsby-code-text\">unstable_batchedUpdates</code>. In Blocking Mode and Concurrent Mode, all <code class=\"gatsby-code-text\">setState</code>s are batched by default.</p>\n<p>**: Warns in development.</p>","frontmatter":{"title":"Adopting Concurrent Mode (Experimental)","next":"concurrent-mode-reference.html","prev":"concurrent-mode-patterns.html"},"fields":{"path":"content/docs/concurrent-mode-adoption.md","slug":"docs/concurrent-mode-adoption.html"}}},"pageContext":{"slug":"docs/concurrent-mode-adoption.html"}}